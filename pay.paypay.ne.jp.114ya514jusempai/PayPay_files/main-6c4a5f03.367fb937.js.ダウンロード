"use strict";(self["webpackChunkpaypay_web"]=self["webpackChunkpaypay_web"]||[]).push([[9059],{21309:function(e,t,n){var i,o,r,s,a;n.d(t,{ir:function(){return r},j0:function(){return s},ms:function(){return o},xO:function(){return a}}),function(e){e["PAGE_VIEW"]="page_view"}(i||(i={})),function(e){e["AMAZON_ACC_LINK"]="amazon_account_linking"}(o||(o={})),function(e){e["REDIRECT_BACK"]="redirect_back",e["ACCOUNT_SUCCESS"]="account_success",e["ENTER_KYC_HELP"]="enter_kyc_help",e["TAP_KYC_HELP"]="help_tapped"}(r||(r={})),function(e){e["PP_ACCOUNT_LINKED_ERR"]="paypay_account_already_linked_error",e["AMZ_ACCOUNT_LINKED_ERR"]="amazon_account_already_linked_error",e["KYC_ERR"]="kyc_error",e["RISK_ERR"]="risk_error",e["PERMISSION_SCREEN"]="permission_screen",e["TIMEOUT_ERR"]="timeout_error",e["GENERAL_ERROR"]="general_error"}(s||(s={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["APP"]="APP"}(a||(a={}))},30714:function(e,t,n){var i,o,r,s,a,c,E,l,I,d,u,S,_,R,N,A,T,C,p,m,D,O,P,f,L,g,U,y,v,M,h,G,k,F;n.d(t,{C0:function(){return d},D9:function(){return M},D_:function(){return v},EA:function(){return L},F5:function(){return F},Mw:function(){return _},Re:function(){return l},Sj:function(){return r},ZN:function(){return I},_3:function(){return h},d6:function(){return O},eB:function(){return i},eq:function(){return R},fs:function(){return f},l9:function(){return k},mX:function(){return T},qh:function(){return N},ug:function(){return A},yB:function(){return S}}),function(e){e["ORDINARY"]="ORDINARY"}(i||(i={})),function(e){e["SUCCESS"]="SUCCESS",e["PENDING"]="PENDING",e["FAILED"]="FAILED"}(o||(o={})),function(e){e["JPY"]="JPY"}(r||(r={})),function(e){e["AMEX"]="A",e["DINERS"]="D",e["JCB"]="J",e["MASTER"]="M",e["UNION"]="O",e["VISA"]="V"}(s||(s={})),function(e){e["JCB"]="JCB",e["MASTER"]="MASTER",e["VISA"]="VISA"}(a||(a={})),function(e){e["COMPLETED"]="COMPLETED",e["NOT_APPLIED"]="NOT_APPLIED"}(c||(c={})),function(e){e["INVALID_PHONE_NUMBER"]="INVALID_PHONE_NUMBER",e["NG"]="NG",e["NOT_EXIST"]="NOT_EXIST",e["OK"]="OK",e["SMS"]="SMS"}(E||(E={})),function(e){e["CREATED"]="CREATED",e["FAILED"]="FAILED",e["PENDING"]="PENDING",e["SUCCESS"]="SUCCESS"}(l||(l={})),function(e){e["ACQUIRING"]="ACQUIRING",e["CASHBACK"]="CASHBACK",e["REFUND"]="REFUND",e["P2PRECEIVE"]="P2PRECEIVE",e["P2PSEND"]="P2PSEND",e["PAYOUT"]="PAYOUT",e["TOPUP"]="TOPUP",e["TOPUPREVERT"]="TOPUPREVERT",e["PRE_AUTH"]="PRE_AUTH",e["REMITTANCE"]="REMITTANCE"}(I||(I={})),function(e){e["C2B_REMITTANCE_OFFLINE"]="C2B_REMITTANCE_OFFLINE"}(d||(d={})),function(e){e["TRANSACTION"]="TRANSACTION",e["P2P"]="P2P",e["P2PSEND"]="P2PSEND",e["P2PRECEIVE"]="P2PRECEIVE"}(u||(u={})),function(e){e["ACTIVATED"]="ACTIVATED",e["OFF"]="OFF",e["APPLYING"]="APPLYING",e["MAINTENANCE"]="MAINTENANCE",e["SUSPENDED"]="SUSPENDED"}(S||(S={})),function(e){e["ACTIVATED"]="ACTIVATED",e["APPLYING"]="APPLYING",e["BUSY"]="BUSY",e["MAINTENANCE"]="MAINTENANCE",e["NO_BALANCE"]="NO_BALANCE",e["OFF"]="OFF",e["SUSPENDED"]="SUSPENDED"}(_||(_={})),function(e){e["BANK"]="BANK",e["CREDIT_CARD"]="CREDIT_CARD",e["GIFT_CARD"]="GIFT_CARD",e["MERCHANT"]="MERCHANT",e["SBID_CARRIER_BILLING"]="SBID_CARRIER_BILLING",e["WALLET"]="WALLET",e["YMONEY_BALANCE"]="YMONEY_BALANCE",e["YMONEY_BANK"]="YMONEY_BANK",e["PAY_LATER_CC"]="PAY_LATER_CC",e["POINT"]="POINT",e["GIFT_VOUCHER"]="GIFT_VOUCHER",e["NONE"]="NONE"}(R||(R={})),function(e){e["PAYMENT"]="PAYMENT",e["HOME_BARCODE"]="HOME_BARCODE",e["BALANCE_HISTORY"]="BALANCE_HISTORY",e["RECEIPT"]="RECEIPT",e["BARCODE"]="BARCODE",e["TOPUP"]="TOPUP",e["SEVEN_BANK"]="SEVEN_BANK",e["ATM_TOPUP"]="ATM_TOPUP",e["P2P"]="P2P",e["GIFT_CARD"]="GIFT_CARD",e["NOTIFICATION"]="NOTIFICATION",e["BILL_PAYMENT"]="BILL_PAYMENT",e["YMONEY_MIGRATION"]="YMONEY_MIGRATION",e["WEB_PAYMENT"]="WEB_PAYMENT",e["SDK_BARCODE_PAYMENT"]="SDK_BARCODE_PAYMENT"}(N||(N={})),function(e){e["DISABLED"]="DISABLED",e["ENABLED"]="ENABLED",e["NOT_SETUP"]="NOT_SETUP"}(A||(A={})),function(e){e["GRAY"]="GRAY",e["GREEN"]="GREEN",e["RED"]="RED",e["YELLOW"]="YELLOW"}(T||(T={})),function(e){e["TOPUP"]="TOPUP",e["ACQUIRING"]="ACQUIRING",e["REFUND"]="REFUND",e["CASHBACK"]="CASHBACK",e["PAYOUT"]="PAYOUT",e["P2PSEND"]="P2PSEND",e["P2PRECEIVE"]="P2PRECEIVE",e["PRE_AUTH"]="PRE_AUTH"}(C||(C={})),function(e){e["CREDIT_CARD"]="CREDIT_CARD",e["WALLET"]="WALLET",e["BANK"]="BANK",e["SEVEN_BANK"]="SEVEN_BANK",e["YAHOO_AUCTION"]="YAHOO_AUCTION",e["GIFT_CARD"]="GIFT_CARD",e["SBID_CARRIER_BILLING"]="SBID_CARRIER_BILLING",e["YMONEY_BALANCE"]="YMONEY_BALANCE"}(p||(p={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["PENDING"]="PENDING",e["CREATED"]="CREATED",e["EXPIRED"]="EXPIRED",e["CANCELED"]="CANCELED",e["AUTHORIZED"]="AUTHORIZED"}(m||(m={})),function(e){e["GREEN"]="GREEN",e["RED"]="RED",e["YELLOW"]="YELLOW",e["GRAY"]="GRAY"}(D||(D={})),function(e){e["STATIC_QR"]="STATIC_QR",e["DYNAMIC_QR"]="DYNAMIC_QR",e["ONE_TIME_CODE"]="ONE_TIME_CODE",e["PENDING_PAYMENT"]="PENDING_PAYMENT",e["BILL_PAYMENT"]="BILL_PAYMENT",e["TOPUP"]="TOPUP",e["WEB_TOPUP"]="WEB_TOPUP",e["AUTO_TOPUP"]="AUTO_TOPUP",e["P2P"]="P2P",e["SPLIT_BILL"]="SPLIT_BILL",e["OFFLINE_REMITTANCE"]="OFFLINE_REMITTANCE"}(O||(O={})),function(e){e["MAIN"]="MAIN",e["MORE"]="MORE"}(P||(P={})),function(e){e["YJ_CARD"]="YJ_CARD",e["PP_CARD"]="PP_CARD"}(f||(f={})),function(e){e["SBID_MAINTENANCE"]="SBID_MAINTENANCE"}(L||(L={})),function(e){e["FUTURE"]="FUTURE",e["ONGOING"]="ONGOING"}(g||(g={})),function(e){e["DAILY"]="DAILY",e["MONTHLY"]="MONTHLY"}(U||(U={})),function(e){e["CASHIER"]="CASHIER",e["OFFLINE_DONATION"]="OFFLINE_DONATION"}(y||(y={})),function(e){e["ACQUIRING"]="ACQUIRING",e["TOPUP"]="TOPUP",e["TOPUP_AND_PAY"]="TOPUP_AND_PAY",e["REMITTANCE"]="REMITTANCE",e["P2P"]="P2P"}(v||(v={})),function(e){e["MANUAL_TOPUP"]="MANUAL_TOPUP",e["TOPUP_AND_PAY"]="TOPUP_AND_PAY"}(M||(M={})),function(e){e["REGULAR"]="REGULAR",e["GOLD"]="GOLD"}(h||(h={})),function(e){e["ALL"]="ALL",e["PAYROLL_ENABLED"]="PAYROLL_ENABLED"}(G||(G={})),function(e){e["SIGNIN"]="SIGNIN",e["SIGNUP"]="SIGNUP"}(k||(k={})),function(e){e["ANNOUNCEMENT_CC_STEP_UNAVAILABLE"]="ANNOUNCEMENT_CC_STEP_UNAVAILABLE",e["PROMOTION_PAYLATER_OTHER_CREDIT_CARD"]="PROMOTION_PAYLATER_OTHER_CREDIT_CARD",e["OVERDRAFT"]="OVERDRAFT"}(F||(F={}))},86473:function(e,t,n){var i,o;n.d(t,{D:function(){return i}}),function(e){e["SUCCESS"]="SUCCESS",e["ERROR"]="ERROR"}(i||(i={})),function(e){e["COMPLETED"]="COMPLETED",e["REJECTED"]="REJECTED",e["PENDING"]="PENDING",e["TRANSFERRED"]="TRANSFERRED"}(o||(o={}))},48418:function(e,t,n){var i,o,r;n.d(t,{T5:function(){return i},Y_:function(){return r}}),function(e){e["CREATED"]="CREATED",e["FAILED"]="FAILED",e["PENDING"]="PENDING",e["SUCCESS"]="SUCCESS",e["REJECTED"]="REJECTED",e["EXPIRED"]="EXPIRED"}(i||(i={})),function(e){e["DEFAULT"]="default",e["POCHIBUKURO"]="pochibukuro",e["OTOSHIDAMA"]="otoshidama"}(o||(o={})),function(e){e["IOS"]="ios",e["ANDROID"]="android"}(r||(r={}))},41553:function(e,t,n){var i,o;n.d(t,{$:function(){return i}}),function(e){e["GOOGLE"]="google",e["OTP"]="otp",e["PASSWORD"]="password",e["PASSWORDLESS"]="passwordless",e["SOFTBANK"]="softbank",e["YAHOO"]="yahoo"}(i||(i={})),function(e){e["COVID_TOKYO_NOTIFICATION"]="COVID_TOKYO_NOTIFICATION",e["ROOTED_DEVICE"]="ROOTED_DEVICE",e["SBID_CARRIER_BILLING"]="SBID_CARRIER_BILLING"}(o||(o={}))},84674:function(e,t,n){n.d(t,{Pj:function(){return a},xC:function(){return s},zs:function(){return r}});var i=n(39050),o=n(46770);const r={OPENAPI:"openApi",OPAWEB:"opaWeb",ACCOUNTLINKAGE:"accountLinkage",OTP:"otp",OPAAMAZON:"opaAmazon",OPAALIPAY:"opaAliPay",OPA_SMART_PAYMENT:"opaSmartPayment",CASHIER:"cashier",OPAOAUTH2:"opaOauth2"},s=()=>(0,i.$t)(""),a=e=>(0,i.$t)(o.A,e)},46770:function(e,t,n){n.d(t,{A:function(){return h}});n(62953);var i,o=n(85471),r=n(95353),s=n(55373),a=n.n(s),c=n(96470),E=n(80760),l=n(24909),I=n(27685),d=n(25618),u=n(75005),S=n(56060),_=n(72455),R=n(48008),N=n(89504),A=n(11263),T=n(67034),C=n(55222);(function(e){e["PAYPAY_WALLET"]="pay_by_wallet",e["PAYPAY_CARD_PAYLATER"]="pay_by_pay-later_pp-physical-card"})(i||(i={}));const p={isLinked:!1,isLoading:!1,currentPayPayRate:void 0,currentPaylaterCardRate:void 0},m={loading(e,t){e.isLoading=t},updatePayPayRate(e,t){e.currentPayPayRate=t},updatePaylaterCardRate(e,t){e.currentPaylaterCardRate=t}},D={async load({commit:e,dispatch:t}){e("loading",!0),await t("loadPayPayData"),e("loading",!1)},async loadPayPayData({commit:e}){const[t,n]=await(0,C.s)();var o,r;t&&n&&(null===n||void 0===n||null===(o=n.data)||void 0===o||null===(r=o.current_month)||void 0===r||r.campaigns.forEach((t=>{var n,o;((null===t||void 0===t?void 0:t.name)===i.PAYPAY_WALLET&&e("updatePayPayRate",null===t||void 0===t?void 0:t.eligible_rate),(null===t||void 0===t?void 0:t.name)===i.PAYPAY_CARD_PAYLATER)&&e("updatePaylaterCardRate",null!==(n=t.condition)&&void 0!==n&&null!==(o=n.gold_card)&&void 0!==o&&o.fulfilled?t.eligible_gold_rate:t.eligible_rate)})))}},O={namespaced:!0,actions:D,mutations:m,state:p};var P=O,f=n(86442),L=n(76897);o["default"].use(r.Ay);const g={setDisplayInfo(e,t){Object.assign(e.displayInfo,t)},setGlobal(e,t){Object.assign(e.global,t)},setErrorModal(e,t){Object.assign(e.errorModal,t)},setTimestamp(e,t){e.timestamp=t},setHeaderBackRootPage(e,t){e.headerRootPage&&!t.force||(e.headerRootPage=t.pageName)},setExternalId(e,t){e.externalId=t},setSystemAnnouncementBannerInfo(e,t){e.systemAnnouncementBannerInfo=t}},U={setDisplayInfo({commit:e},t){e("setDisplayInfo",t)},setGlobal({commit:e},t){e("setGlobal",t)},setErrorModal({commit:e},t){e("setErrorModal",t)},async setTimestamp({commit:e}){try{const{timestamp:t}=await l.A.getServerTimestamp();e("setTimestamp",t)}catch(t){return!1}},setStorageSignFlow({commit:e},t){t.scope=t.scope||"OPA";const n=(0,c._S)(I.A.KEY.SIGN_FLOW)||{};(0,c.AP)(I.A.KEY.SIGN_FLOW,Object.assign(n,t)),e("setGlobal",{scope:t.scope})},redirectAfterSignFlow(e,t){const{redirect:n}=this.getters.signInformation();t&&(0,c.sc)(t),n&&(window.location.href=n)},removeOPAStorage(e,t){t&&(0,c.sc)(t)},removeLocalstorage(e,t){t.forEach((e=>{(0,c.sc)(e)}))},setHeaderBackRootPage({commit:e},t){e("setHeaderBackRootPage",t)},isHeaderBackToNativeApp({state:e},t){return e.headerRootPage===t},async prepareHelpLink({commit:e,state:t}){if(t.externalId)return;const n=await l.A.account.fetchUserInfo({});n&&e("setExternalId",n.external_id)},async getSystemAnnouncementBannerInfo({commit:e},t){var n;const[,i]=await l.A.bff.getSystemAnnouncementBannerInfo(t),o=null===i||void 0===i||null===(n=i.payload)||void 0===n?void 0:n.systemAnnouncementBannerInfo;e("setSystemAnnouncementBannerInfo",o)}},y={getExternalId(e){return e.externalId},displayInfo(e){return e.displayInfo},isOpenApiScope(e){return"OPA"===e.global.scope},isYahooWalletScope(e){const t=I.A.VALUE.YAHOO_WALLET,n=(0,c._S)(I.A.KEY.YAHOO_CALLBACK);return e.global.scope===t||n&&n.scope===t},isYahooLinkScope(e){const t=I.A.VALUE.YAHOO_LINK,n=(0,c._S)(I.A.KEY.YAHOO_CALLBACK);return e.global.scope===t||n&&n.scope===t},isYahooLinkExpired(){const e=(0,c._S)(I.A.KEY.YAHOO_CALLBACK),t=!e||!e.validUntil||(new Date).getTime()>e.validUntil;return t},signInformation:e=>()=>{const t=(0,c._S)(I.A.KEY.SIGN_FLOW)||{},n=t.scope||e.global.scope;return{signUp:n===I.A.VALUE.SIGN_UP,signIn:n===I.A.VALUE.SIGN_IN,source:t.source,query:t.query,redirect:t.redirect,origin:t.origin}},getHelpLinkQuery(e){const{externalId:t}=e,n=(0,E.uo)();return a().stringify({external_id:t,platform:n.toLowerCase()})},getHeaderRootPage({headerRootPage:e}){return e},systemAnnouncementBannerInfo(e){return e.systemAnnouncementBannerInfo}},v={displayInfo:d.p.createDefault(),version:"1.0.0",global:{scope:""},timestamp:(new Date).getTime(),errorModal:{url:""},headerRootPage:"",otp:{type:"mobile",identification:"",otpPrefix:"",referenceId:""},externalId:"",systemAnnouncementBannerInfo:null},M={state:v,getters:y,actions:U,mutations:g,modules:{openApi:u.Nd,opaWeb:S.DZ,opaAmazon:_.P3,opaAliPay:R.Le,opaApple:N.x7,otp:A.o,accountLinkage:T.A,newStep:P,p2p:f.T,opaOauth2:L.s4}};var h=new r.Ay.Store(M)},67034:function(e,t,n){n.d(t,{m:function(){return i}});n(44114);var i,o=n(96470),r=n(14516),s=n(27685);(function(e){e["INITIAL"]="INITIAL",e["READY"]="READY",e["NOT_SIGN_IN"]="NOT_SIGN_IN",e["SIGN_IN_SUCCESS"]="SIGN_IN_SUCCESS",e["AGREEMENT_AGREED"]="AGREEMENT_AGREED",e["LINKAGE_LINKING"]="LINKAGE_LINKING",e["LINKAGE_SUCCESS"]="LINKAGE_SUCCESS",e["LINKAGE_FAILURE"]="LINKAGE_FAILURE"})(i||(i={}));const a={serviceName:"_null",flowStatus:i.INITIAL,meta:{}},c=()=>{const e=Object.assign({},a),t=(new Date).getTime()+6e5;e._expireTime=t,(0,o.AP)(s.A.KEY.ACCOUNT_LINKAGE_FLOW,e)},E=()=>{(0,o.sc)(s.A.KEY.ACCOUNT_LINKAGE_FLOW)},l=()=>{const e=(0,o._S)(s.A.KEY.ACCOUNT_LINKAGE_FLOW);if(!e)return!1;const t=(new Date).getTime();return e._expireTime<t?(E(),!1):(delete e._expireTime,e)},I={setServiceName(e,t){e.serviceName=t},setFlowStatus(e,t){e.flowStatus=t},setMeta(e,t){e.meta={...e.meta,...t}},updateAccountLinkage(e,t){const{serviceName:n,flowStatus:i,meta:o}=t;e.serviceName=n,e.flowStatus=i,o&&(e.meta={...e.meta,...o})},loadFromLocalStorage(e,t){t&&(e.serviceName=t.serviceName,e.flowStatus=t.flowStatus,e.meta={...t.meta})}},d={isAccountLinkage:e=>{const t="_null"!==e.serviceName;return t&&e.flowStatus!==i.INITIAL}},u={setServiceName({commit:e},t){e("setServiceName",t),c()},setFlowStatus({commit:e},t){e("setFlowStatus",t),c()},setMeta({commit:e},t){e("setMeta",t),c()},updateAccountLinkage({commit:e},t){e("updateAccountLinkage",t),c()},restoreStateIfNeeded:({state:e,dispatch:t})=>{e.flowStatus===i.INITIAL&&t("loadFromLocalStorage")},loadFromLocalStorage({commit:e}){e("loadFromLocalStorage",l())},removeLocalStorage(){E()},redirectSigninSuccess({commit:e},t){const{flowStatus:n}=t;n&&(e("setFlowStatus",n),c()),(0,o.sc)(s.A.KEY.SIGN_FLOW),r.A.push({name:"accountLinkageCallback",params:{serviceName:a.serviceName}})}},S={namespaced:!0,state:a,getters:d,actions:u,mutations:I};t.A=S},48008:function(e,t,n){n.d(t,{pH:function(){return p},_t:function(){return R},te:function(){return N},fR:function(){return T},bk:function(){return C},Le:function(){return L}});n(89463),n(62953);var i=n(68997),o=n(96470),r=n(80760),s=n(24909),a=n(25618),c=n(52901),E=n(67120),l=n(39789),I=n(14516),d=n(87365),u=n(6634);n(27495);const S=e=>{const t=e&&e.alipay_account_link_qr_data,n=e&&e.code;if(!e||!t||!n)return null;const i=n.match(/\/28180108(.+)/);return!i||i.length<2?null:{code:e.code,codeId:i[1],phoneNumber:"",merchant:{name:t.authClientName,logoUrl:t.authClientLogo,clientId:t.authClientId,permissions:t.scopes,redirectUrl:t.authRedirectUrl,termsCondition:{url:t.termsConditions.url,displayText:t.termsConditions.description},isKyc:!1,permissionTexts:t.permissions,legalText:t.legalText,customProperties:t.customProperties}}};class _{static createFromUserModule(e){var t;if(!e)return null;const i=e.mobile,o=e.user_defined_id;return{identification:i||o||"",displayName:e.display_name||"",photoUrl:null!==(t=e.photo_url)&&void 0!==t?t:n(20616),externalId:e.external_id}}}var R,N,A,T,C,p;(function(e){e["CODE_EXPIRED"]="CODE_EXPIRED",e["ACC_LINK"]="ACC_LINK",e["REDIRECT_SCREEN"]="REDIRECT_SCREEN",e["ERROR"]="ERROR",e["PROCESSING"]="PROCESSING",e["SIGN_IN"]="SIGN_IN",e["SIGN_IN_OTP"]="SIGN_IN_OTP",e["SIGN_UP"]="SIGN_UP",e["SIGN_UP_OTP"]="SIGN_UP_OTP",e["KYC_NOT_COMPLETED"]="KYC_NOT_COMPLETED",e["KYC_DATA_MISMATCH"]="KYC_DATA_MISMATCH",e["INTENT_CLICKED"]="INTENT_CLICKED",e["UNDEFINED"]="UNDEFINED",e["USER_CANCEL"]="USER_CANCEL",e["ALREADY_LINKED"]="ALREADY_LINKED"})(R||(R={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["UNDEFINED"]="UNDEFINED"}(N||(N={})),function(e){e["INITIAL"]="INITIAL",e["FETCHING"]="FETCHING",e["FETCHED"]="FETCHED",e["ERROR"]="ERROR",e["EXPIRED"]="EXPIRED"}(A||(A={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["OTP_REQUIRED"]="OTP_REQUIRED",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(T||(T={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["FAILED_NOT_MATCH"]="FAILED_NOT_MATCH",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(C||(C={})),function(e){e["GOOGLE"]="Google",e["MICROSOFT"]="Microsoft"}(p||(p={}));const m=()=>({displayInfo:a.p.createDefault(),mode:R.SIGN_IN,screenType:N.UNDEFINED,isPollingStarted:!1,isSignProcessing:!1,isModalProfileBoxVisible:!1,isProfileMenuButtonVisible:!0,accLinkInfo:null,accLinkInfoStatus:A.INITIAL,isRedirectScreenDisplayed:!1,isSignErrorTipDisplayed:!1,errorCode:"",userDisplayInfo:null,userDisplayInfoStatus:A.INITIAL,redirectTimer:0,redirectUrl:null,expiryTimer:0,isFetchingData:!1,client:{logo:"",name:"",clientId:"",phoneNumber:"",permissions:[],privacyPolicy:{url:"",displayText:""},termsConditions:{url:"",displayText:""},kycCheck:!1,accountLinkFooterText:"",permissionTexts:[],legalText:"",customProperties:{utmInformation:{utmSource:""},merchantConfigurations:{scanToLink:!1,hideSignUp:!0},gaEventData:{mId:""},headerDetailClientInfo:{headerDetailClientLogo:"",headerDetailClientName:""}}},errorMode:null,isAlipayOnline:!0});var D=n(89113);const O={setState({commit:e},t){e("setState",t)},async getAccLinkInfoAsync({commit:e,dispatch:t,state:n},i){var o;n.accLinkInfoStatus!==A.ERROR&&e("setState",{accLinkInfoStatus:A.FETCHING});const[,r]=await s.A.paylite.getQrCodeFetch({code:i});let a=null,c=null;if(!r)return e("setState",{accLinkInfoStatus:A.ERROR}),!1;if(a=r.alipay_account_link_qr_data,c=S(r),!r||!a||!c)return e("setState",{accLinkInfoStatus:A.ERROR}),!1;const E=await s.A.getServerTimestamp();if(!E)return e("setState",{accLinkInfoStatus:A.ERROR}),!1;const l=E.timestamp/1e3;let I=0;I=a.expiresAt;const d=l<I;e("setState",{accLinkInfo:c,accLinkInfoStatus:d?A.FETCHED:A.EXPIRED,redirectUrl:null===(o=a)||void 0===o?void 0:o.authRedirectUrl}),setTimeout((()=>t("alipayCheckLinkStatus")));const u=[R.CODE_EXPIRED,R.ERROR,R.REDIRECT_SCREEN,R.USER_CANCEL].includes(n.mode);let _=Math.floor(I-l);if(!u){const t=setInterval((()=>{_>0&&!u?(e("setState",{expiryTimer:_}),--_):(e("setState",{mode:R.CODE_EXPIRED,expiryTimer:0}),clearInterval(t))}),1e3)}return await new Promise((e=>setTimeout(e,500))),d},async getUserInfoAsync({commit:e,rootGetters:t,rootState:n}){e("setState",{isSignProcessing:!0,userDisplayInfoStatus:A.FETCHING});const i=_.createFromUserModule(await s.A.account.fetchUserInfo({}));return i?(e("setState",{mode:R.ACC_LINK,isSignProcessing:!1,userDisplayInfo:i,userDisplayInfoStatus:A.FETCHED}),!0):(n.otp.referenceId?e("setState",{isSignProcessing:!1,mode:t.signInformation(n).signIn?R.SIGN_IN_OTP:R.SIGN_UP_OTP}):e("setState",{mode:R.SIGN_IN,isSignProcessing:!1}),!1)},async signOutAsync({commit:e,state:t}){e("setState",{isSignProcessing:!0}),await s.A.logout(),(0,o.sw)();const n={...m(),isSignProcessing:!0,mode:t.mode===R.REDIRECT_SCREEN?R.REDIRECT_SCREEN:R.SIGN_IN,screenType:t.screenType,accLinkInfo:t.accLinkInfo,accLinkInfoStatus:t.accLinkInfoStatus};setTimeout((()=>e("setState",n)),500),setTimeout((()=>e("setState",{isSignProcessing:!1})),1e3)},async signWithMobileAsync({commit:e,state:t},n){if(t.isSignProcessing)return[T.ALREADY_PROCESSING];e("setState",{isSignProcessing:!0,isSignErrorTipDisplayed:!1});const[,i,o]=t.mode===R.SIGN_IN?await s.A.userModule.oauthTokenPassword({...n,login_type:D.$_.ALIPAY_ACCOUNT_LINKING}):await s.A.userModule.signUpMobile({mobile:n.username,password:n.password}),r=Boolean(i&&i.otp_reference_id),c=Boolean(i&&i.access_token);switch(setTimeout((()=>e("setState",{isSignProcessing:!1})),250),!0){case r:return i&&i.otp_reference_id?[T.OTP_REQUIRED,i.otp_reference_id,i.otp_prefix]:[T.FAILED];case c:return[T.SUCCESS];default:switch(t.mode){case R.SIGN_IN:e("setState",{isSignErrorTipDisplayed:!0,errorCode:o&&o.response&&o.response.data&&o.response.data.result_info&&o.response.data.result_info.result_msg||""});break;case R.SIGN_UP:if((()=>{const e=i||o&&o.response&&o.response.data;return e&&e.result_info&&"01103104"===e.result_info.result_code_id})())e("setState",{isSignErrorTipDisplayed:!0});else{const t=a.p.createError("UM_GENERIC",i,o);e("setState",{displayInfo:t})}break}return[T.FAILED]}},async signVerifyOtpAsync({commit:e,state:t},n){if(t.isSignProcessing)return C.ALREADY_PROCESSING;e("setState",{isSignProcessing:!0});const[i]=t.mode===R.SIGN_IN_OTP?await s.A.userModule.oauthTokenOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:parseInt(n.otp,10),login_type:D.$_.ALIPAY_ACCOUNT_LINKING}):await s.A.userModule.signUpMobileValidateOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:n.otp});return i||setTimeout((()=>e("setState",{isSignProcessing:!1})),250),i?C.SUCCESS:C.FAILED},startRedirectTimer({commit:e}){let t=3;return e("setState",{redirectTimer:t}),new Promise((n=>{setTimeout((()=>{setInterval((()=>{t>=0?(e("setState",{redirectTimer:t}),t--):n(!0)}),1e3)}),1e3)}))},async alipayCheckLinkStatus({getters:e,commit:t,dispatch:n}){const i=e.codeId,o=setInterval((async()=>{try{const{data:{data:t}}=await(0,c.oc)({codeId:i});t.alipayWebRedirectUrl&&!e.isRedirectScreenDisplayed&&(clearInterval(o),n("alipayDecisionResult",{redirectUrl:t.alipayWebRedirectUrl}))}catch(r){clearInterval(o),t("updateMode",R.ERROR)}}),2e3)},async startCheckingLinkStatus({commit:e,state:t}){e("setState",{isPollingStarted:!0});const n=setInterval((async()=>{if(t.isPollingStarted&&-1===[R.ERROR,R.PROCESSING,R.KYC_DATA_MISMATCH,R.KYC_NOT_COMPLETED,R.INTENT_CLICKED].indexOf(t.mode)){const o=await s.A.openApi.checkAccountLinkStatus();if(!o||o===u.OQ.SESSION_NOT_FOUND)return clearInterval(n),void e("setState",{isPollingStarted:!1,mode:R.CODE_EXPIRED});const{data:r}=o;if(r&&("ACCEPTED"===r.accountLinkStatus||"DECLINED"===r.accountLinkStatus)){let o=r.callbackUrl;o+=o.indexOf("?")>-1?"&":"?",r.callbackParams&&(o+=i.A.stringify(r.callbackParams)),"ACCEPTED"===r.accountLinkStatus?e("setState",{mode:R.REDIRECT_SCREEN,redirectUrl:o}):(clearInterval(n),t.isPollingStarted=!1,window.location.href=o),clearInterval(n),t.isPollingStarted=!1}}}),2e3)},async alipayMakeDecision({commit:e,dispatch:t,getters:n},{decision:i,isAppFlow:o=!1}){try{o||await(0,c.I$)({codeId:n.codeId});const{data:e}=await(0,c.UO)({codeId:n.codeId,decision:i}),{alipayWebRedirectUrl:r}=e.data;t("alipayDecisionResult",{redirectUrl:r})}catch(r){e("updateMode",R.ERROR)}},alipayDecisionResult({commit:e},{redirectUrl:t}){var n,o;if(!t)return void e("updateMode",R.ERROR);const r=null===(n=i.A.parse(t))||void 0===n||null===(o=n.resultCode)||void 0===o?void 0:o.split("#")[0];switch(r){case"SUCCESS":e("updateRedirectUrl",t),e("updateMode",R.REDIRECT_SCREEN);break;case"USER_CANCEL":e("updateRedirectUrl",t),e("updateMode",R.USER_CANCEL);break;default:e("updateMode",R.ERROR)}},alipayDecisionResultNative({commit:e},{redirectUrl:t}){var n,o;if(!t)return void e("updateMode",R.ERROR);const r=null===(n=i.A.parse(t))||void 0===n||null===(o=n.resultCode)||void 0===o?void 0:o.split("#")[0];switch(r){case"SUCCESS":case"USER_CANCEL":e("updateRedirectUrl",t);break;default:e("updateMode",R.ERROR)}},async alipayMakeDecisionNative({dispatch:e},{decision:t}){var n;const i=I.A.currentRoute.query.codeId||"",o=I.A.currentRoute.query.referenceAgreementId||"",s=!(0,r.kp)({ios:d.wq,android:d._M}),a=(null===(n=I.A.currentRoute.query)||void 0===n?void 0:n.mode)||"";try{const{data:n}=await(0,c.UO)({codeId:i,decision:t}),{data:r,resultInfo:l}=n,u=l.code,S=()=>{const e={referenceAgreementId:o,resultInfo:l,...r,authRedirectUrl:r.alipayWebRedirectUrl};window.PayPayJsBridge.getAlipayAuthResult(e)};if(s&&"scan"!==a)return S(),!0;if(!s){var E;const t=(null===(E=I.A.currentRoute.query)||void 0===E?void 0:E.flow)||"";if(t===d.nl.APP_TO_APP)return S(),!0;if(t===d.nl.MOBILE_WEB||t===d.nl.MERCHANT_TERMINAL){const t=r.alipayWebRedirectUrl;return await e("alipayDecisionResultNative",{redirectUrl:t}),!0}}if("SUCCESS"===u)return!0}catch(l){return!1}return!1},async alipayUpdateClientAsync({commit:e,state:t}){const n=I.A.currentRoute.query.codeId||"";try{const{data:{resultInfo:i,data:o}}=await(0,c.I$)({codeId:n});if("SUCCESS"===i.code){const n=await s.A.getServerTimestamp();if(!n)return!1;const i=n.timestamp/1e3;let r=0;r=o.expiresAt;const a=i<r;e("setState",{accLinkInfoStatus:a?A.FETCHED:A.EXPIRED,redirectUrl:null===o||void 0===o?void 0:o.authRedirectUrl});const c=[R.CODE_EXPIRED,R.ERROR,R.REDIRECT_SCREEN,R.USER_CANCEL].includes(t.mode);let E=Math.floor(r-i);if(!c){const t=setInterval((()=>{E>0&&!c?(e("setState",{expiryTimer:E}),--E):(e("setState",{mode:R.CODE_EXPIRED,expiryTimer:0}),clearInterval(t))}),1e3)}return e("updateClient",{logo:o.authClientLogo,name:o.authClientName,clientId:o.authClientId,phoneNumber:"",permissions:o.scopes,termsConditions:{url:o.termsConditions.url,displayText:o.termsConditions.description},permissionTexts:o.permissions,legalText:o.legalText,customProperties:o.customProperties}),!0}}catch(i){}return!1},updateClient({commit:e},t){e("updateClient",t)},async googlePayUpdateClientAsync({commit:e,state:t}){try{const{data:{resultInfo:o,data:r}}=await(0,E.tG)();if("SUCCESS"===o.code){var n,i;if("USER_ALREADY_LINKED"===r.status)return e("updateMode",R.ALREADY_LINKED),!1;const o=await s.A.getServerTimestamp();if(!o)return!1;const a=o.timestamp/1e3;let c=0;c=r.expiresAt;const E=a<c;e("setState",{accLinkInfoStatus:E?A.FETCHED:A.EXPIRED,redirectUrl:null===r||void 0===r?void 0:r.authRedirectUrl});const l=[R.CODE_EXPIRED,R.ERROR,R.REDIRECT_SCREEN,R.USER_CANCEL].includes(t.mode);let I=Math.floor(c-a);if(!l){const t=setInterval((()=>{I>0?(e("setState",{expiryTimer:I}),--I):(e("setState",{mode:R.CODE_EXPIRED,expiryTimer:0}),clearInterval(t))}),1e3)}return e("updateClient",{logo:null===r||void 0===r?void 0:r.authClientLogo,name:null===r||void 0===r?void 0:r.authClientName,clientId:null===r||void 0===r?void 0:r.authClientId,phoneNumber:"",permissions:null===r||void 0===r?void 0:r.scopes,termsConditions:{url:null===r||void 0===r||null===(n=r.termsConditions)||void 0===n?void 0:n.url,displayText:null===r||void 0===r||null===(i=r.termsConditions)||void 0===i?void 0:i.description},permissionTexts:null===r||void 0===r?void 0:r.permissions,legalText:null===r||void 0===r?void 0:r.legalText,customProperties:null===r||void 0===r?void 0:r.customProperties,sessionId:null===r||void 0===r?void 0:r.sessionId}),!0}e("updateMode",R.ERROR)}catch(d){var o,r,a,c,l,I;if("USER_ALREADY_LINKED"===(null===d||void 0===d||null===(o=d.response)||void 0===o||null===(r=o.data)||void 0===r||null===(a=r.resultInfo)||void 0===a?void 0:a.code))e("updateMode",R.ALREADY_LINKED),e("updateClient",{sessionId:null===d||void 0===d||null===(c=d.response)||void 0===c||null===(l=c.data)||void 0===l||null===(I=l.data)||void 0===I?void 0:I.sessionId});else e("updateMode",R.ERROR)}return!1},async googlePayMakeDecision({commit:e,state:t},{decision:n}){try{const i=t.client.sessionId||"",{data:o}=await(0,E.og)({sessionId:i,decision:n}),{data:r,resultInfo:s}=o;return"SUCCESS"!==s.code?(e("updateMode",R.ERROR),!1):("ACCEPTED"===r.status?e("updateMode",R.REDIRECT_SCREEN):e("updateMode",R.USER_CANCEL),!0)}catch(i){e("updateMode",R.ERROR)}return!1},async googlePayAuthenticateUser({commit:e,state:t},{authRequest:n,appVersion:i}){try{const o=t.client.sessionId||"",{data:r}=await(0,E.ko)({sessionId:o,authRequest:n},i),{data:s,resultInfo:a}=r;return"SUCCESS"===a.code?s:(e("updateMode",R.ERROR),!1)}catch(o){e("updateMode",R.ERROR)}return!1},async getAccessTokenFromOtt({commit:e},{ott:t,clientId:n}){try{const[i]=await(0,l.D5)(t,n);return!!i||(e("updateMode",R.ERROR),!1)}catch(i){e("updateMode",R.ERROR)}return!1},async googlePayComplete({commit:e,state:t},{authRedirectUrl:n,accountLinkingResult:i,errors:o}){try{const r=t.client.sessionId||"";if(""===r)return!1;const{data:s}=await(0,E.ZR)({sessionId:r,authRedirectUrl:n,accountLinkingResult:i,errors:o}),{resultInfo:a}=s;return"SUCCESS"===a.code||(e("updateMode",R.ERROR),!1)}catch(r){e("updateMode",R.ERROR)}return!1}},P={mode:({mode:e})=>e,screenType:({screenType:e})=>e,isPollingStarted:({isPollingStarted:e})=>e,isSignProcessing:({isSignProcessing:e})=>e,isFetchingData:({isFetchingData:e})=>e,isProcessingDisplayed:({mode:e})=>e===R.PROCESSING,accLinkInfo:({accLinkInfo:e})=>e,accLinkInfoStatus:({accLinkInfoStatus:e})=>e,merchantInfo:({accLinkInfo:e})=>e?e.merchant:{},isFetchingErrorQrCodeDisplayed:({accLinkInfoStatus:e,mode:t})=>[A.ERROR,A.EXPIRED].includes(e)||[R.ERROR,R.KYC_DATA_MISMATCH,R.KYC_NOT_COMPLETED].includes(t),isRedirectScreenDisplayed:({mode:e,accLinkInfoStatus:t})=>[R.REDIRECT_SCREEN,R.USER_CANCEL].includes(e)&&![A.ERROR,A.EXPIRED].includes(t),codeId:({accLinkInfo:e})=>e&&e.codeId||"",userDisplayInfo:({userDisplayInfo:e})=>e,userDisplayInfoStatus:({userDisplayInfoStatus:e})=>e,displayInfo:({displayInfo:e})=>e,isModalProfileBoxVisible:({isModalProfileBoxVisible:e})=>e,isProfileMenuButtonVisible:({isProfileMenuButtonVisible:e})=>e,isLoadingScreenVisible:({isSignProcessing:e})=>Boolean(e),isScreenModeDesktop:({screenType:e})=>e===N.DESKTOP,isScreenModeMobile:({screenType:e})=>e===N.MOBILE,isSignErrorTipDisplayed:({isSignErrorTipDisplayed:e})=>e,isSignInUpDisplayed:({mode:e})=>Boolean(e===R.SIGN_IN||e===R.SIGN_UP),isSignOtpDisplayed:({mode:e})=>Boolean(e===R.SIGN_IN_OTP||e===R.SIGN_UP_OTP),isAccountLinkDisplayed:({mode:e})=>Boolean(e===R.ACC_LINK),isScreenBlur:({displayInfo:e})=>Boolean(e.isVisible),redirectTimer:({redirectTimer:e})=>e,redirectUrl:({redirectUrl:e})=>e||"",expiryTimer:({expiryTimer:e})=>e,merchantId:({client:e})=>{var t,n;return(null===e||void 0===e||null===(t=e.customProperties)||void 0===t||null===(n=t.gaEventData)||void 0===n?void 0:n.mId)||""},isTimeout:({mode:e})=>e===R.CODE_EXPIRED,headerLogo:({accLinkInfo:e})=>{var t,n,i;return(null===e||void 0===e||null===(t=e.merchant)||void 0===t||null===(n=t.customProperties)||void 0===n||null===(i=n.headerDetailClientInfo)||void 0===i?void 0:i.headerDetailClientLogo)||""},headerTitle:({accLinkInfo:e})=>{var t,n,i;return(null===e||void 0===e||null===(t=e.merchant)||void 0===t||null===(n=t.customProperties)||void 0===n||null===(i=n.headerDetailClientInfo)||void 0===i?void 0:i.headerDetailClientName)||""}},f={setState(e,t){Object.assign(e,t)},updateRedirectUrl(e,t){e.redirectUrl=t},updateMode(e,t){e.mode=t},updateExpiryTimer(e,t){e.expiryTimer=t},updateClient(e,t){e.client=t}},L={namespaced:!0,actions:O,getters:P,mutations:f,state:m()}},72455:function(e,t,n){n.d(t,{Or:function(){return l.Or},Fn:function(){return l.Fn},Yh:function(){return l.Yh},te:function(){return l.te},fR:function(){return l.fR},bk:function(){return l.bk},P3:function(){return C}});n(62953);var i=n(96470),o=n(2619),r=n(24909),s=n(25618),a=n(76951),c=n(21309),E=n(37253),l=n(24019);const I=()=>({displayInfo:s.p.createDefault(),accLinkInfoStatus:l.Fn.INITIAL,lastError:l.Yh.NO_ERROR,mode:l.Or.SIGN_IN,redirectTimerHandle:0,permissions:["direct_debit","pending_payments","get_balance"],phoneNumber:"",sessionId:"",screenType:l.te.UNDEFINED,isPollingStarted:!1,isSignProcessing:!1,isModalProfileBoxVisible:!1,isProfileMenuButtonVisible:!0,accLinkInfo:null,isRedirectScreenDisplayed:!1,isSignErrorTipDisplayed:!1,errorCode:"",userDisplayInfo:null,userDisplayInfoStatus:l.Fn.INITIAL,redirectTimer:0,redirectUrl:"",expiryTimer:0,isFetchingData:!1,currentTimestamp:null,expiryTimestamp:null,systemAnnouncementBannerInfo:null});n(27495);const d=e=>{const t=e&&e.amazon_account_link_qr_data,n=e&&e.code;if(!e||!t||!n)return null;const i=n.match(/\/28180109(.+)/);return!i||i.length<2?null:{code:e.code,codeId:i[1],phoneNumber:"",merchant:{name:t.clientName,logoUrl:t.clientLogo,permissions:[],redirectUrl:t.callbackUrl,termsCondition:{url:"",displayText:""},isKyc:!1}}};class u{static createFromUserModule(e){if(!e)return null;const t=e.mobile?e.mobile.substring(0,3)+"******"+e.mobile.substring(e.mobile.length-2):"",i=e.user_defined_id;return{id:e?e.id:-1,externalId:e.external_id,identification:t||i||"",displayName:e.display_name||"",photoUrl:e.photo_url||n(25848)}}}let S;const _=(e,t)=>{S&&clearInterval(S);const n={isPollingStarted:!1};t&&(n.mode=t),e("setState",n)},R=(e,t)=>{"SUCCESS"===t.status.toUpperCase()?(e("setState",{redirectUrl:t.callbackURL}),_(e,l.Or.REDIRECT_SCREEN)):"DECLINED"===t.status.toUpperCase()&&(e("setState",{redirectUrl:t.callbackURL}),_(e),window.location.href=t.callbackURL)},N={setState({commit:e},t){e("setState",t)},async getAccLinkInfoAsync({commit:e,state:t,dispatch:n},i){var o;t.accLinkInfoStatus!==l.Fn.ERROR&&e("setState",{accLinkInfoStatus:l.Fn.FETCHING});const[,s]=await r.A.paylite.getQrCodeFetch({code:i});let a=null,c=null;if(!s)return e("setState",{accLinkInfoStatus:l.Fn.ERROR}),!1;if(a=s.amazon_account_link_qr_data,c=d(s),!s||!a||!c)return e("setState",{accLinkInfoStatus:l.Fn.ERROR}),!1;const E=await r.A.getServerTimestamp();if(!E)return e("setState",{accLinkInfoStatus:l.Fn.ERROR}),!1;const I=E.timestamp/1e3;let u=0;u=a.expiresAt,e("setState",{currentTimestamp:+I,expiryTimestamp:+u});const S=I<u;if(e("setState",{accLinkInfo:c,accLinkInfoStatus:S?l.Fn.FETCHED:l.Fn.EXPIRED,redirectUrl:null===(o=a)||void 0===o?void 0:o.callbackUrl}),t.screenType===l.te.DESKTOP){setTimeout((()=>n("startCheckingLinkStatus")));const i=[l.Or.CODE_EXPIRED,l.Or.ERROR,l.Or.REDIRECT_SCREEN].includes(t.mode);if(!i){let t=Math.floor(u-I);if(!i){const n=setInterval((()=>{t>0&&!i?(e("setState",{expiryTimer:t}),--t):(e("setState",{mode:l.Or.CODE_EXPIRED}),clearInterval(n))}),1e3)}}}return await new Promise((e=>setTimeout(e,500))),S},async signVerifyOtpAsync({commit:e,state:t},n){if(t.isSignProcessing)return l.bk.ALREADY_PROCESSING;e("setState",{isSignProcessing:!0});const[i]=t.mode===l.Or.SIGN_IN_OTP?await r.A.userModule.oauthTokenOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:parseInt(n.otp,10)}):await r.A.userModule.signUpMobileValidateOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:n.otp});return i||setTimeout((()=>e("setState",{isSignProcessing:!1})),250),i?l.bk.SUCCESS:l.bk.FAILED},async signWithMobileAsync({commit:e,state:t},n){if(t.isSignProcessing)return[l.fR.ALREADY_PROCESSING];e("setState",{isSignProcessing:!0,isSignErrorTipDisplayed:!1});const[,i,o]=t.mode===l.Or.SIGN_IN?await r.A.userModule.oauthTokenPassword(n):await r.A.userModule.signUpMobile({mobile:n.username,password:n.password}),a=Boolean(i&&i.otp_reference_id),c=Boolean(i&&i.access_token);switch(setTimeout((()=>e("setState",{isSignProcessing:!1})),250),!0){case a:return i&&i.otp_reference_id?[l.fR.OTP_REQUIRED,i.otp_reference_id,i.otp_prefix]:[l.fR.FAILED];case c:return[l.fR.SUCCESS];default:switch(t.mode){case l.Or.SIGN_IN:e("setState",{isSignErrorTipDisplayed:!0,errorCode:o&&o.response&&o.response.data&&o.response.data.result_info&&o.response.data.result_info.result_msg||""});break;case l.Or.SIGN_UP:if((()=>{const e=i||o&&o.response&&o.response.data;return e&&e.result_info&&"01103104"===e.result_info.result_code_id})())e("setState",{isSignErrorTipDisplayed:!0});else{const t=s.p.createError("UM_GENERIC",i,o);e("setState",{displayInfo:t})}break}return[l.fR.FAILED]}},async getViewInfoOfAmazonAccountLinking({commit:e,dispatch:t,state:n},i){var r,s,E,I,d,u;const S=i;try{const{data:{resultInfo:n,data:i}}=await(0,o.kf)({codeId:S});if(n.code===l.Yh.SUCCESS)return e("setState",{lastError:n.code,phoneNumber:i.phoneNumber,permissions:i.permissions}),await t("resetExpireTimer",i.expiresAt),!0}catch(R){const{data:t}=R.response;switch(e("setState",{lastError:t.resultInfo.code||"",redirectUrl:t.data.redirectUrl||"",phoneNumber:t.data.phoneNumber||""}),t.resultInfo.code){case l.Yh.EXPIRED_ACCOUNT_LINK_SESSION:case l.Yh.TIMEOUT:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.TIMEOUT_ERR,external_id:null===n||void 0===n||null===(r=n.userDisplayInfo)||void 0===r?void 0:r.externalId});break;case l.Yh.NON_KYC_USER:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.KYC_ERR,external_id:null===n||void 0===n||null===(s=n.userDisplayInfo)||void 0===s?void 0:s.externalId});break;case l.Yh.AMAZON_ID_ALREADY_LINKED:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.AMZ_ACCOUNT_LINKED_ERR,external_id:null===n||void 0===n||null===(E=n.userDisplayInfo)||void 0===E?void 0:E.externalId});break;case l.Yh.USER_ALREADY_LINKED:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.PP_ACCOUNT_LINKED_ERR,external_id:null===n||void 0===n||null===(I=n.userDisplayInfo)||void 0===I?void 0:I.externalId});break;case l.Yh.RISK_CHECK_FAIL:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.RISK_ERR,external_id:null===n||void 0===n||null===(d=n.userDisplayInfo)||void 0===d?void 0:d.externalId});break;default:(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.GENERAL_ERROR,external_id:null===n||void 0===n||null===(u=n.userDisplayInfo)||void 0===u?void 0:u.externalId})}return _(e),!1}return!1},async getUserInfoAsync({commit:e,rootGetters:t,rootState:n}){e("setState",{isSignProcessing:!0,userDisplayInfoStatus:l.Fn.FETCHING});const i=u.createFromUserModule(await r.A.account.fetchUserInfo({}));return i?(e("setState",{mode:l.Or.ACC_LINK,isSignProcessing:!1,userDisplayInfo:i,userDisplayInfoStatus:l.Fn.FETCHED}),(0,a.h)("view",{event_category:c.ms.AMAZON_ACC_LINK,screen_name:c.j0.PERMISSION_SCREEN,external_id:i.externalId}),!0):(n.otp.referenceId?e("setState",{isSignProcessing:!1,mode:t.signInformation(n).signIn?l.Or.SIGN_IN_OTP:l.Or.SIGN_UP_OTP}):e("setState",{mode:l.Or.SIGN_IN,isSignProcessing:!1}),!1)},async amazonMakeDecision({dispatch:e,commit:t,state:n},{decision:i,sessionId:r}){try{const t=(0,E.Z)(),s=t?"wifi"===t:null,{data:a}=await(0,o.Yc)({codeId:r,decision:i,wifiConnected:s});if("SUCCESS"===a.resultInfo.code){const{redirectUrl:t}=a.data,i={redirectUrl:t,lastError:a.resultInfo.code};return n.screenType===l.te.DESKTOP&&(i.mode=l.Or.REDIRECT_SCREEN),e("setState",i),!0}}catch(s){const{data:e}=s.response;return t("setState",{lastError:l.Yh.USER_DECLINED,redirectUrl:e.data.redirectUrl||""}),!1}return!1},async resetExpireTimer({commit:e},t){let n;const i=await r.A.getServerTimestamp();return n=i?Math.floor(i.timestamp/1e3):Math.floor(Date.now()/1e3),e("updateExpiryTimer",t-n),!0},startRedirectTimer({commit:e}){let t=3;return e("setState",{redirectTimer:t}),new Promise((n=>{setTimeout((()=>{setInterval((()=>{t>=0?(e("setState",{redirectTimer:t}),t--):n(!0)}),1e3)}),1e3)}))},async signOutAsync({commit:e,state:t}){e("setState",{isSignProcessing:!0}),await r.A.logout(),(0,i.sw)();const n={...I(),isSignProcessing:!0,mode:t.mode===l.Or.REDIRECT_SCREEN?l.Or.REDIRECT_SCREEN:l.Or.SIGN_IN,screenType:t.screenType,accLinkInfo:t.accLinkInfo,accLinkInfoStatus:t.accLinkInfoStatus};setTimeout((()=>e("setState",n)),500),setTimeout((()=>e("setState",{isSignProcessing:!1})),1e3)},async startCheckingLinkStatus({commit:e,state:t}){e("setState",{isPollingStarted:!0}),S=window.setInterval((async()=>{if(t.isPollingStarted&&-1===[l.Or.PROCESSING,l.Or.KYC_DATA_MISMATCH,l.Or.KYC_NOT_COMPLETED,l.Or.INTENT_CLICKED].indexOf(t.mode)){var n,i,r;let t;try{t=await(0,o.cx)()}catch(s){_(e,l.Or.CODE_EXPIRED)}if(!t||"SUCCESS"!==(null===(n=t)||void 0===n||null===(i=n.data)||void 0===i||null===(r=i.resultInfo)||void 0===r?void 0:r.code))return void _(e,l.Or.CODE_EXPIRED);const{data:a}=t.data;a&&R(e,a)}}),2e3)},async getSystemAnnouncementBannerInfo({commit:e},t){let n="";switch(t.screenType){case"SIGN_IN":n="SIGNIN";break;case"SIGN_UP":n="SIGNUP";break}if(n)try{const[t,i]=await r.A.bff.getSystemAnnouncementBannerInfo(n);t&&e("setState",{systemAnnouncementBannerInfo:null===i||void 0===i?void 0:i.payload.systemAnnouncementBannerInfo})}catch(i){}}},A={permissions:({permissions:e})=>e,lastError:({lastError:e})=>e,redirectUrl:({redirectUrl:e})=>e,redirectTimerHandle:({redirectTimerHandle:e})=>e,phoneNumber:({phoneNumber:e})=>e,sessionId:({sessionId:e})=>e,isScreenModeDesktop:({screenType:e})=>e===l.te.DESKTOP,isScreenModeMobile:({screenType:e})=>e===l.te.MOBILE,isSignInUpDisplayed:({mode:e})=>Boolean(e===l.Or.SIGN_IN||e===l.Or.SIGN_UP),isSignErrorTipDisplayed:({isSignErrorTipDisplayed:e})=>e,isSignOtpDisplayed:({mode:e})=>Boolean(e===l.Or.SIGN_IN_OTP||e===l.Or.SIGN_UP_OTP),isAccountLinkDisplayed:({mode:e})=>Boolean(e===l.Or.ACC_LINK),isRedirectScreenDisplayed:({mode:e,accLinkInfoStatus:t})=>[l.Or.REDIRECT_SCREEN].includes(e)&&![l.Fn.ERROR,l.Fn.EXPIRED].includes(t),isProcessingDisplayed:({mode:e})=>e===l.Or.PROCESSING,isFetchingErrorQrCodeDisplayed:({accLinkInfoStatus:e,mode:t})=>[l.Fn.ERROR,l.Fn.EXPIRED].includes(e)||[l.Or.ERROR,l.Or.KYC_DATA_MISMATCH,l.Or.KYC_NOT_COMPLETED,l.Or.AMAZON_ID_ALREADY_LINKED,l.Or.USER_ALREADY_LINKED].includes(t),isTimeout:({mode:e})=>e===l.Or.CODE_EXPIRED,phoneNumberWithMaskingAndSeparators({phoneNumber:e}){const t="XXX******XX",n=(e.match(/\d+/g)||[""]).join("");let i="";for(let o=0;o<=n.length;o++)3!==o&&7!==o||(i+="-"),"X"!=t.charAt(o)?i+=t.charAt(o):i+=e.charAt(o);return i},mode:({mode:e})=>e,screenType:({screenType:e})=>e,isPollingStarted:({isPollingStarted:e})=>e,isSignProcessing:({isSignProcessing:e})=>e,isFetchingData:({isFetchingData:e})=>e,accLinkInfo:({accLinkInfo:e})=>e,accLinkInfoStatus:({accLinkInfoStatus:e})=>e,merchantInfo:({accLinkInfo:e})=>e?e.merchant:{},codeId:({accLinkInfo:e})=>e&&e.codeId||"",userDisplayInfo:({userDisplayInfo:e})=>e,userDisplayInfoStatus:({userDisplayInfoStatus:e})=>e,displayInfo:({displayInfo:e})=>e,isModalProfileBoxVisible:({isModalProfileBoxVisible:e})=>e,isProfileMenuButtonVisible:({isProfileMenuButtonVisible:e})=>e,isLoadingScreenVisible:({isSignProcessing:e})=>Boolean(e),isScreenBlur:({displayInfo:e})=>Boolean(e.isVisible),redirectTimer:({redirectTimer:e})=>e,expiryTimer:({expiryTimer:e})=>e,systemAnnouncementBannerInfo:({systemAnnouncementBannerInfo:e})=>e},T={setState(e,t){Object.assign(e,t)},updateRedirectUrl(e,t){e.redirectUrl=t},updateExpiryTimer(e,t){e.expiryTimer=t}},C={namespaced:!0,actions:N,getters:A,mutations:T,state:I()}},24019:function(e,t,n){var i,o,r,s,a,c;n.d(t,{Fn:function(){return o},Or:function(){return i},Yh:function(){return s},bk:function(){return c},fR:function(){return a},te:function(){return r}}),function(e){e["CODE_EXPIRED"]="CODE_EXPIRED",e["ACC_LINK"]="ACC_LINK",e["REDIRECT_SCREEN"]="REDIRECT_SCREEN",e["ERROR"]="ERROR",e["PROCESSING"]="PROCESSING",e["SIGN_IN"]="SIGN_IN",e["SIGN_IN_OTP"]="SIGN_IN_OTP",e["SIGN_UP"]="SIGN_UP",e["SIGN_UP_OTP"]="SIGN_UP_OTP",e["KYC_NOT_COMPLETED"]="KYC_NOT_COMPLETED",e["KYC_DATA_MISMATCH"]="KYC_DATA_MISMATCH",e["INTENT_CLICKED"]="INTENT_CLICKED",e["UNDEFINED"]="UNDEFINED",e["AMAZON_ID_ALREADY_LINKED"]="AMAZON_ID_ALREADY_LINKED",e["USER_ALREADY_LINKED"]="USER_ALREADY_LINKED"}(i||(i={})),function(e){e["INITIAL"]="INITIAL",e["FETCHING"]="FETCHING",e["FETCHED"]="FETCHED",e["ERROR"]="ERROR",e["EXPIRED"]="EXPIRED"}(o||(o={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["APP"]="APP",e["UNDEFINED"]="UNDEFINED"}(r||(r={})),function(e){e["NO_ERROR"]="NO_ERROR",e["SUCCESS"]="SUCCESS",e["TIMEOUT"]="TIMEOUT",e["AUTHORIZATION_SESSION_NOT_FOUND"]="AUTHORIZATION_SESSION_NOT_FOUND",e["EXPIRED_ACCOUNT_LINK_SESSION"]="EXPIRED_ACCOUNT_LINK_SESSION",e["NON_KYC_USER"]="NON_KYC_USER",e["USER_ALREADY_LINKED"]="USER_ALREADY_LINKED",e["AMAZON_ID_ALREADY_LINKED"]="AMAZON_ID_ALREADY_LINKED",e["INTERNAL_SERVER_ERROR"]="INTERNAL_SERVER_ERROR",e["RISK_CHECK_FAIL"]="RISK_CHECK_FAIL",e["USER_DECLINED"]="USER_DECLINED",e["AUTHORIZATION_SESSION_UNEXPECTED_STATUS"]="AUTHORIZATION_SESSION_UNEXPECTED_STATUS"}(s||(s={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["OTP_REQUIRED"]="OTP_REQUIRED",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(a||(a={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["FAILED_NOT_MATCH"]="FAILED_NOT_MATCH",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(c||(c={}))},89504:function(e,t,n){n.d(t,{Ci:function(){return i},Yh:function(){return s},te:function(){return r},fR:function(){return c},bk:function(){return E},x7:function(){return U}});n(62953);var i,o,r,s,a,c,E,l=n(96470),I=n(80760),d=n(95871),u=n(24909),S=n(25618),_=n(97857);(function(e){e["CODE_EXPIRED"]="CODE_EXPIRED",e["ACC_LINK"]="ACC_LINK",e["ACC_BIND"]="ACC_BIND",e["REDIRECT_SCREEN"]="REDIRECT_SCREEN",e["PROCESSING"]="PROCESSING",e["SIGN_IN"]="SIGN_IN",e["SIGN_IN_OTP"]="SIGN_IN_OTP",e["SIGN_UP"]="SIGN_UP",e["SIGN_UP_OTP"]="SIGN_UP_OTP",e["UNDEFINED"]="UNDEFINED",e["UNAUTHORIZED"]="UNAUTHORIZED",e["AUTHORIZATION_SESSION_UNEXPECTED_STATUS"]="AUTHORIZATION_SESSION_UNEXPECTED_STATUS",e["AUTHORIZATION_SESSION_EXPIRED"]="AUTHORIZATION_SESSION_EXPIRED"})(i||(i={})),function(e){e["INITIAL"]="INITIAL",e["FETCHING"]="FETCHING",e["FETCHED"]="FETCHED",e["ERROR"]="ERROR",e["EXPIRED"]="EXPIRED"}(o||(o={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["UNDEFINED"]="UNDEFINED",e["APP"]="APP"}(r||(r={})),function(e){e["NO_ERROR"]="NO_ERROR",e["SUCCESS"]="SUCCESS",e["TIMEOUT"]="TIMEOUT",e["AUTHORIZATION_SESSION_NOT_FOUND"]="AUTHORIZATION_SESSION_NOT_FOUND",e["AUTHORIZATION_SESSION_UNEXPECTED_STATUS"]="AUTHORIZATION_SESSION_UNEXPECTED_STATUS",e["AUTHORIZATION_SESSION_EXPIRED"]="AUTHORIZATION_SESSION_EXPIRED",e["UNKNOWN_ERROR"]="UNKNOWN_ERROR"}(s||(s={})),function(e){e["SUCCESS"]="SUCCESS",e["ERROR"]="ERROR",e["REDIRECTED"]="REDIRECTED",e["IDLE"]="IDLE"}(a||(a={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["OTP_REQUIRED"]="OTP_REQUIRED",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(c||(c={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["FAILED_NOT_MATCH"]="FAILED_NOT_MATCH",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(E||(E={}));n(27495);const R=e=>{const t=e&&e.apple_account_link_qr_data,n=e&&e.code;if(!e||!t||!n)return null;const i=n.match(/\/28180112(.+)/);return!i||i.length<2?null:{code:e.code,codeId:i[1],phoneNumber:"",merchant:{clientName:t.clientName,clientLogo:t.clientLogo}}};class N{static createFromUserModule(e){return e?{identification:e.user_defined_id||"",displayName:e.display_name||"",photoUrl:e.photo_url||n(27362)}:null}}var A=n(65092);const T=()=>({displayInfo:S.p.createDefault(),accLinkInfoStatus:o.INITIAL,lastError:s.NO_ERROR,mode:i.SIGN_IN,redirectTimerHandle:0,permissions:[],maskedPhoneNumber:"",sessionId:"",screenType:r.UNDEFINED,decision:A.PS.Accepted,isScanMode:!1,isBindingProcessing:!1,isProfileMenuButtonVisible:!0,isPollingStarted:!1,isSignProcessing:!1,isModalProfileBoxVisible:!1,accLinkInfo:null,isRedirectScreenDisplayed:!1,isSignErrorTipDisplayed:!1,errorCode:"",userDisplayInfo:null,userDisplayInfoStatus:o.INITIAL,userId:0,redirectTimer:0,redirectUrl:"",expiryTimer:0,isFetchingData:!1,clientLogo:"",clientName:""});let C;const p=(e,t)=>{C&&clearInterval(C);const n={isPollingStarted:!1};t&&(n.mode=t),e("setState",n)},m=(e,t)=>{"ACCEPTED"===t.status.toUpperCase()?(e("setState",{redirectUrl:t.redirectUrl}),p(e,i.REDIRECT_SCREEN)):"DECLINED"===t.status.toUpperCase()&&(e("setState",{redirectUrl:t.redirectUrl}),p(e),window.location.href=t.redirectUrl)},D=async e=>{const t=await u.A.account.fetchUserInfo({});return!!t&&(e("setState",{userId:t.id}),t)},O=e=>e?`***-****-${e.slice(-4)}`:"",P=(e,t,n)=>{const o={};if(t.screenType===r.DESKTOP)if(n&&n.response){var a,c,E,l;const{data:e}=n.response;o.mode=(null===(a=e.resultInfo)||void 0===a?void 0:a.code)||i.UNDEFINED,o.redirectUrl=null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.redirectUrl,o.maskedPhoneNumber=null!==e&&void 0!==e&&null!==(E=e.data)&&void 0!==E&&E.maskedPhoneNumber?O(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.maskedPhoneNumber):""}else o.mode=i.UNDEFINED,o.lastError=s.UNKNOWN_ERROR;else if(n&&n.response){var I,d,u,S;const{data:e}=n.response;o.lastError=(null===(I=e.resultInfo)||void 0===I?void 0:I.code)||s.UNKNOWN_ERROR,o.maskedPhoneNumber=null!==e&&void 0!==e&&null!==(d=e.data)&&void 0!==d&&d.maskedPhoneNumber?O(null===e||void 0===e||null===(u=e.data)||void 0===u?void 0:u.maskedPhoneNumber):"",o.redirectUrl=null===e||void 0===e||null===(S=e.data)||void 0===S?void 0:S.redirectUrl}else o.lastError=s.UNKNOWN_ERROR;e("setState",o)},f={setState({commit:e},t){e("setState",t)},async getAccLinkInfoAsync({commit:e,state:t,dispatch:n},s){t.accLinkInfoStatus!==o.ERROR&&e("setState",{accLinkInfoStatus:o.FETCHING});const[,a]=await u.A.paylite.getQrCodeFetch({code:s});let c=null,E=null;if(!a)return e("setState",{accLinkInfoStatus:o.ERROR}),!1;if(c=a.apple_account_link_qr_data,E=R(a),!a||!c||!E)return e("setState",{accLinkInfoStatus:o.ERROR}),!1;const l=await u.A.getServerTimestamp();if(!l)return e("setState",{accLinkInfoStatus:o.ERROR}),!1;const I=l.timestamp/1e3;let d=0;d=c.expiresAt;const S=I<d;if(e("setState",{accLinkInfo:E,accLinkInfoStatus:S?o.FETCHED:o.EXPIRED}),t.screenType===r.DESKTOP){setTimeout((()=>n("startCheckingLinkStatus")));const o=[i.CODE_EXPIRED,i.REDIRECT_SCREEN].includes(t.mode);let r=Math.floor(d-I);if(!o){const t=setInterval((()=>{r>0&&!o?(e("setState",{expiryTimer:r}),--r):(e("setState",{mode:i.CODE_EXPIRED}),clearInterval(t))}),1e3)}}return await new Promise((e=>setTimeout(e,500))),S},async signVerifyOtpAsync({commit:e,state:t},n){if(t.isSignProcessing)return E.ALREADY_PROCESSING;e("setState",{isSignProcessing:!0});const[o]=t.mode===i.SIGN_IN_OTP?await u.A.userModule.oauthTokenOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:parseInt(n.otp,10)}):await u.A.userModule.signUpMobileValidateOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:n.otp});return o||setTimeout((()=>e("setState",{isSignProcessing:!1})),250),o?E.SUCCESS:E.FAILED},async signWithMobileAsync({commit:e,state:t},n){if(t.isSignProcessing)return[c.ALREADY_PROCESSING];e("setState",{isSignProcessing:!0,isSignErrorTipDisplayed:!1});const[,o,r]=t.mode===i.SIGN_IN?await u.A.userModule.oauthTokenPassword(n):await u.A.userModule.signUpMobile({mobile:n.username,password:n.password}),s=Boolean(o&&o.otp_reference_id),a=Boolean(o&&o.access_token);switch(setTimeout((()=>e("setState",{isSignProcessing:!1})),250),!0){case s:return o&&o.otp_reference_id?[c.OTP_REQUIRED,o.otp_reference_id,o.otp_prefix]:[c.FAILED];case a:return[c.SUCCESS];default:switch(t.mode){case i.SIGN_IN:e("setState",{isSignErrorTipDisplayed:!0,errorCode:r&&r.response&&r.response.data&&r.response.data.result_info&&r.response.data.result_info.result_msg||""});break;case i.SIGN_UP:if((()=>{const e=o||r&&r.response&&r.response.data;return e&&e.result_info&&"01103104"===e.result_info.result_code_id})())e("setState",{isSignErrorTipDisplayed:!0});else{const t=S.p.createError("UM_GENERIC",o,r);e("setState",{displayInfo:t})}break}return[c.FAILED]}},async getViewInfoOfAppleAccountLinking({commit:e,state:t,dispatch:n},i){const o=i;try{const{data:e}=await(0,d.yI)({codeId:o});return await n("mapViewInfoOfAppleAccountLinking",e)}catch(r){P(e,t,r)}return!1},async initiateAccountLinking({commit:e,state:t,dispatch:n},i){try{const{data:e}=await(0,d._o)({clientId:i});return await n("mapViewInfoOfAppleAccountLinking",e)}catch(o){P(e,t,o)}return!1},async mapViewInfoOfAppleAccountLinking({commit:e,dispatch:t},n){const{resultInfo:i,data:o}=n;return i.code===s.SUCCESS?(e("setState",{lastError:i.code,maskedPhoneNumber:O(o.maskedPhoneNumber),permissions:o.scopes,clientName:o.clientName,clientLogo:o.clientLogo}),o.sessionId&&e("setState",{sessionId:o.sessionId}),await t("resetExpireTimer",o.expiresAt),!0):(e("setState",{lastError:i.code,redirectUrl:o.redirectUrl}),!1)},async getUserInfoAsync({commit:e,rootGetters:t,rootState:n}){e("setState",{isSignProcessing:!0,userDisplayInfoStatus:o.FETCHING});const r=await D(e);let s;return r&&(s=N.createFromUserModule(r)),r?(e("setState",{mode:i.ACC_LINK,isSignProcessing:!1,userDisplayInfo:s,userDisplayInfoStatus:o.FETCHED}),!0):(n.otp.referenceId?e("setState",{isSignProcessing:!1,mode:t.signInformation(n).signIn?i.SIGN_IN_OTP:i.SIGN_UP_OTP}):e("setState",{mode:i.SIGN_IN,isSignProcessing:!1}),!1)},async appleMakeDecision({commit:e,state:t,getters:n},{decision:i,sessionId:o,isTimeoutOnAppOrMobile:r}){try{e("setState",{decision:i}),C&&clearInterval(C);const t=n.isBindingMode?d.b9:d.sm,{data:a}=await t({codeId:o,decision:i}),{redirectUrl:c}=null===a||void 0===a?void 0:a.data;return e("setState",r?{redirectUrl:c,lastError:s.TIMEOUT}:{redirectUrl:c,lastError:a.resultInfo.code}),a.resultInfo.code===s.SUCCESS}catch(a){return P(e,t,a),!1}},async startCheckingLinkStatus({commit:e,state:t}){e("setState",{isPollingStarted:!0}),C=window.setInterval((async()=>{if(t.isPollingStarted&&-1===[i.PROCESSING].indexOf(t.mode)){var n,o,r;let t;try{t=await(0,d.cx)()}catch(s){p(e,i.CODE_EXPIRED)}if(!t||"SUCCESS"!==(null===(n=t)||void 0===n||null===(o=n.data)||void 0===o||null===(r=o.resultInfo)||void 0===r?void 0:r.code))return void p(e,i.CODE_EXPIRED);const{data:a}=t.data;a&&m(e,a)}}),2e3)},async signOutAsync({commit:e,state:t}){e("setState",{isSignProcessing:!0}),await u.A.logout(),(0,l.sw)();const n={...T(),isSignProcessing:!0,mode:t.mode===i.REDIRECT_SCREEN?i.REDIRECT_SCREEN:i.SIGN_IN,screenType:t.screenType,accLinkInfo:t.accLinkInfo,accLinkInfoStatus:t.accLinkInfoStatus};setTimeout((()=>e("setState",n)),500),setTimeout((()=>e("setState",{isSignProcessing:!1})),1e3)},async resetExpireTimer({commit:e},t){let n;const i=await u.A.getServerTimestamp();return n=i?Math.floor(i.timestamp/1e3):Math.floor(Date.now()/1e3),e("setState",{expiryTimer:t-n}),!0},startRedirectTimer({commit:e}){let t=3;return e("setState",{redirectTimer:t}),new Promise((n=>{setTimeout((()=>{setInterval((()=>{t>=0?(e("setState",{redirectTimer:t}),t--):n(!0)}),1e3)}),1e3)}))},async initAppleInAppBinding({commit:e,state:t,dispatch:n}){if(t.mode===i.ACC_BIND||t.sessionId)return a.IDLE;const o=">=4.13.0",r=">=16.4";e("setState",{isBindingProcessing:!0,mode:i.ACC_BIND});try{if((0,_._5)(r)&&(0,I.J_)()&&(0,I.kp)(o)){const e=await n("initiateAccountLinking","apple-client-id");return e?a.SUCCESS:a.ERROR}return a.REDIRECTED}finally{setTimeout((()=>e("setState",{isBindingProcessing:!1})),500)}},getInAppBindingUrlFromStatus({state:e},t){const n={web:{SUCCESS:"applePermissionWeb",ERROR:"appleErrorWeb",REDIRECTED:"https://apps.apple.com/account/billing",IDLE:""},native:{SUCCESS:"applePermission",ERROR:"appleError",REDIRECTED:"https://apps.apple.com/account/billing",IDLE:""}};return"MOBILE"===e.screenType||"DESKTOP"===e.screenType?n.web[t]||"":n.native[t]||""}},L={permissions:({permissions:e})=>e,lastError:({lastError:e})=>e,errorCode:({errorCode:e})=>e,redirectUrl:({redirectUrl:e})=>e,redirectTimerHandle:({redirectTimerHandle:e})=>e,maskedPhoneNumber:({maskedPhoneNumber:e})=>e,sessionId:({sessionId:e})=>e,isScreenModeDesktop:({screenType:e})=>e===r.DESKTOP,isScreenModeMobile:({screenType:e})=>e===r.MOBILE,isSignInUpDisplayed:({mode:e})=>Boolean(e===i.SIGN_IN||e===i.SIGN_UP),isSignErrorTipDisplayed:({isSignErrorTipDisplayed:e})=>e,isSignOtpDisplayed:({mode:e})=>Boolean(e===i.SIGN_IN_OTP||e===i.SIGN_UP_OTP),isAccountLinkDisplayed:({mode:e})=>Boolean(e===i.ACC_LINK||e===i.ACC_BIND),isProfileMenuButtonVisible:({isProfileMenuButtonVisible:e})=>e,isRedirectScreenDisplayed:({mode:e,accLinkInfoStatus:t})=>[i.REDIRECT_SCREEN].includes(e)&&![o.ERROR,o.EXPIRED].includes(t),isProcessingDisplayed:({mode:e})=>e===i.PROCESSING,isFetchingErrorQrCodeDisplayed:({accLinkInfoStatus:e,mode:t})=>[o.ERROR,o.EXPIRED].includes(e)||[i.CODE_EXPIRED,i.UNAUTHORIZED,i.AUTHORIZATION_SESSION_UNEXPECTED_STATUS,i.AUTHORIZATION_SESSION_EXPIRED,i.UNDEFINED].includes(t),mode:({mode:e})=>e,screenType:({screenType:e})=>e,isPollingStarted:({isPollingStarted:e})=>e,isSignProcessing:({isSignProcessing:e})=>e,isFetchingData:({isFetchingData:e})=>e,accLinkInfo:({accLinkInfo:e})=>e,accLinkInfoStatus:({accLinkInfoStatus:e})=>e,merchantInfo:({accLinkInfo:e})=>e?e.merchant:{},codeId:({accLinkInfo:e})=>e&&e.codeId||"",userDisplayInfo:({userDisplayInfo:e})=>e,userDisplayInfoStatus:({userDisplayInfoStatus:e})=>e,displayInfo:({displayInfo:e})=>e,isModalProfileBoxVisible:({isModalProfileBoxVisible:e})=>e,isLoadingScreenVisible:({isSignProcessing:e})=>Boolean(e),isScreenBlur:({displayInfo:e})=>Boolean(e.isVisible),redirectTimer:({redirectTimer:e})=>e,expiryTimer:({expiryTimer:e})=>e,clientName:({clientName:e})=>e,clientLogo:({clientLogo:e})=>e,decision:({decision:e})=>e,userId:({userId:e})=>e,isScanMode:({isScanMode:e})=>e,isBindingMode:({mode:e})=>e===i.ACC_BIND,isBindingProcessing:({isBindingProcessing:e})=>e},g={setState(e,t){Object.assign(e,t)}},U={namespaced:!0,actions:f,getters:L,mutations:g,state:T()}},76897:function(e,t,n){n.d(t,{b1:function(){return r},te:function(){return o},eU:function(){return i},s4:function(){return _}});var i,o,r,s=n(5258);function a(e,t){var n,i,o,r;const s=null!==(n=null===(i=e.permissionView)||void 0===i?void 0:i.data.payload.scopes)&&void 0!==n?n:[],a={interaction_outcome:{extension_id:null!==(o=null===(r=e.permissionView)||void 0===r?void 0:r.extension_id)&&void 0!==o?o:"",data:{type:"USER_DECISION",payload:{authorized_scopes:s,decision:t}}}};return a}function c(e,t,n){var o;if(!t)return!1;if("SUCCESS"===(null===t||void 0===t||null===(o=t.result_info)||void 0===o?void 0:o.result_code)){let o="";return o=e===i.Accepted?t.data.redirect_uri:t.data.error_redirect_uri,n("setState",{redirectUri:o}),!0}return!1}(function(e){e["Accepted"]="Accepted",e["Declined"]="Declined"})(i||(i={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["APP"]="APP"}(o||(o={})),function(e){e["Created"]="Created",e["Started"]="Started",e["Complete"]="Complete"}(r||(r={}));const E={async getPermissionViewData({commit:e,state:t}){try{var n,i;const o={interaction_outcome:null},r=await(0,s.d)(t.requestUri,o);return"SUCCESS"===(null===r||void 0===r||null===(n=r.data)||void 0===n||null===(i=n.result_info)||void 0===i?void 0:i.result_code)&&(e("setState",{permissionView:r.data.data.request}),!0)}catch(o){return!1}},async postUserDecision({commit:e,state:t},n){const i=a(t,n);try{const o=await(0,s.U)(t.requestUri,i);return c(n,null===o||void 0===o?void 0:o.data,e)}catch(o){return!1}}};var l=n(80760),I=n(6634);const d={permissionView({permissionView:e}){return e},merchantLogo({permissionView:e}){var t;return null!==(t=null===e||void 0===e?void 0:e.data.payload.client_logo)&&void 0!==t?t:""},scopes({permissionView:e}){var t;return null!==(t=null===e||void 0===e?void 0:e.data.payload.scopes)&&void 0!==t?t:[]},termsAndConditions({permissionView:e}){var t;return null===e||void 0===e||null===(t=e.data.payload)||void 0===t?void 0:t.terms_condition},agreeCheckbox({permissionView:e}){var t;return null===e||void 0===e||null===(t=e.data.payload)||void 0===t?void 0:t.agree_checkbox},privacyPolicy({permissionView:e}){var t;return null===e||void 0===e||null===(t=e.data.payload)||void 0===t?void 0:t.privacy_policy},accountLinkFooterText({permissionView:e}){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.data.payload)||void 0===n?void 0:n.account_link_footer_text)&&void 0!==t?t:""},clientLogo({permissionView:e}){return null===e||void 0===e?void 0:e.data.payload.client_logo},clientName({permissionView:e}){return null===e||void 0===e?void 0:e.data.payload.client_name},isProcessing({isProcessing:e}){return e},maskedPhoneNumber({permissionView:e}){return(null===e||void 0===e?void 0:e.data.payload.masked_phone_number)||"***-****-****"},redirectUri({redirectUri:e}){return e},screenType(){return(0,l.J_)()?o.APP:window.innerWidth>I.PK.DESKTOP_MIN_WIDTH?o.DESKTOP:o.MOBILE},userAgent({parCheck:e}){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.client_info)||void 0===n?void 0:n.user_agent)&&void 0!==t?t:""},parCheckRedirectUri({parCheck:e}){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.client_info)||void 0===n?void 0:n.redirect_uri)&&void 0!==t?t:""}},u={setState(e,t){Object.assign(e,t)}},S=()=>({requestUri:"",redirectUri:"",permissionView:null,isProcessing:!1,parCheck:null}),_={namespaced:!0,actions:E,getters:d,mutations:u,state:S()}},56060:function(e,t,n){n.d(t,{O4:function(){return o},Fn:function(){return s},_t:function(){return i},te:function(){return r},fR:function(){return a},DZ:function(){return D}});n(27495),n(25440),n(62953);var i,o,r,s,a,c,E=n(68997),l=n(96470),I=n(24909),d=n(25618),u=n(6634),S=n(57464);class _{static createFromPaylite(e){if(!e||!e.account_link_qr_data)return null;const t=e.account_link_qr_data,n=e.account_link_qr_data.clientSettings;return{code:e.code,clientId:t.clientId||"",phoneNumber:t.phoneNumber||"",merchant:{name:t.clientName,logoUrl:null===n||void 0===n?void 0:n.clientLogo,permissions:t.permissions,redirectUrl:t.redirectUrl,privacyPolicy:null===n||void 0===n?void 0:n.privacyPolicy,termsCondition:null===n||void 0===n?void 0:n.termsCondition,isKyc:null===n||void 0===n?void 0:n.kycCheck,accountLinkFooterText:null===n||void 0===n?void 0:n.accountLinkFooterText,agreeCheckbox:null===n||void 0===n?void 0:n.agreeCheckbox,disableSignUp:null===n||void 0===n?void 0:n.disableSignUp}}}}class R{static createFromUserModule(e){if(!e)return null;const t=e.mobile?(0,S.C)("***-****-XXXX",e.mobile):"",i=e.user_defined_id,o=e.is_already_set_display_name?e.display_name:t;return{identification:t||i||"",displayName:o||"",photoUrl:e.photo_url||n(20616),id:e.id,externalId:e.external_id,mobile:e.mobile||""}}}(function(e){e["CODE_EXPIRED"]="CODE_EXPIRED",e["ACC_LINK"]="ACC_LINK",e["REDIRECT_SCREEN"]="REDIRECT_SCREEN",e["ERROR"]="ERROR",e["PROCESSING"]="PROCESSING",e["SIGN_IN"]="SIGN_IN",e["SIGN_IN_OTP"]="SIGN_IN_OTP",e["SIGN_UP"]="SIGN_UP",e["SIGN_UP_OTP"]="SIGN_UP_OTP",e["KYC_NOT_COMPLETED"]="KYC_NOT_COMPLETED",e["KYC_DATA_MISMATCH"]="KYC_DATA_MISMATCH",e["INTENT_CLICKED"]="INTENT_CLICKED",e["UNDEFINED"]="UNDEFINED",e["TIMEOUT_ERROR"]="TIMEOUT_ERROR",e["LINK_ERROR"]="LINK_ERROR",e["KYC_ERROR"]="KYC_ERROR",e["LINKING_FAILED"]="LINKING_FAILED",e["AGE_ERROR"]="AGE_ERROR",e["KYC_SPECIFIED_NOT_COMPLETED"]="KYC_SPECIFIED_NOT_COMPLETED",e["PAYLATERCC_REVIEW_PENDING"]="PAYLATERCC_REVIEW_PENDING",e["MISSING_VIRTUAL_ACCOUNT"]="MISSING_VIRTUAL_ACCOUNT",e["VIRTUAL_ACCOUNT_NOT_VALID_STATE"]="VIRTUAL_ACCOUNT_NOT_VALID_STATE"})(i||(i={})),function(e){e["PAY_PAY_USER_ALREADY_LINKED"]="PAY_PAY_USER_ALREADY_LINKED",e["CLIENT_USER_ALREADY_LINKED"]="CLIENT_USER_ALREADY_LINKED",e["USER_NOT_FOUND"]="USER_NOT_FOUND",e["KYC_NOT_COMPLETED"]="KYC_NOT_COMPLETED",e["INVALID_REQUEST_PARAMS"]="INVALID_REQUEST_PARAMS",e["SESSION_NOT_FOUND"]="SESSION_NOT_FOUND",e["MIN_KYC_AGE_ERROR"]="MIN_KYC_AGE_ERROR",e["KYC_SPECIFIED_NOT_COMPLETED"]="KYC_SPECIFIED_NOT_COMPLETED",e["PAYLATERCC_REVIEW_PENDING"]="PAYLATERCC_REVIEW_PENDING",e["MISSING_VIRTUAL_ACCOUNT"]="MISSING_VIRTUAL_ACCOUNT",e["VIRTUAL_ACCOUNT_NOT_VALID_STATE"]="VIRTUAL_ACCOUNT_NOT_VALID_STATE"}(o||(o={})),function(e){e["DESKTOP"]="DESKTOP",e["MOBILE"]="MOBILE",e["UNDEFINED"]="UNDEFINED",e["APP"]="APP"}(r||(r={})),function(e){e["INITIAL"]="INITIAL",e["FETCHING"]="FETCHING",e["FETCHED"]="FETCHED",e["ERROR"]="ERROR",e["EXPIRED"]="EXPIRED"}(s||(s={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["OTP_REQUIRED"]="OTP_REQUIRED",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(a||(a={})),function(e){e["SUCCESS"]="SUCCESS",e["FAILED"]="FAILED",e["FAILED_NOT_MATCH"]="FAILED_NOT_MATCH",e["ALREADY_PROCESSING"]="ALREADY_PROCESSING"}(c||(c={}));const N=()=>({displayInfo:d.p.createDefault(),mode:i.SIGN_IN,screenType:r.UNDEFINED,isSecondaryBrowser:!1,isPollingStarted:!1,isSignProcessing:!1,isModalProfileBoxVisible:!1,isProfileMenuButtonVisible:!0,accLinkInfo:null,accLinkInfoStatus:s.INITIAL,isRedirectScreenDisplayed:!1,isSignErrorTipDisplayed:!1,errorCode:"",userDisplayInfo:null,userDisplayInfoStatus:s.INITIAL,redirectTimer:0,redirectUrl:null,expiryTimer:0,isFetchingData:!1,isSmartPaymentProcessing:!1,isAutoMandateProcessing:!1,counterIntervalId:null,systemAnnouncementBannerInfo:null,signInMethods:[],showAsyncLoader:!1});var A=n(75005);let T;const C={setState({commit:e},t){e("setState",t)},async getAccLinkInfoAsync({commit:e,dispatch:t,state:n},o){n.accLinkInfoStatus!==s.ERROR&&e("setState",{accLinkInfoStatus:s.FETCHING});const[,r]=await I.A.paylite.getQrCodeFetch({code:o});let a=null,c=null;if(!r)return e("setState",{accLinkInfoStatus:s.ERROR}),!1;var E;if(null!==(E=r.account_link_qr_data)&&void 0!==E&&E.isWebDisabled)return void window.location.replace("https://paypay.onelink.me/U7U6/skx4uuu0");if(a=r.account_link_qr_data,c=_.createFromPaylite(r),!r||!a||!c)return e("setState",{accLinkInfoStatus:s.ERROR}),!1;const l=await I.A.getServerTimestamp();if(!l)return e("setState",{accLinkInfoStatus:s.ERROR}),!1;const d=l.timestamp/1e3;let u=0;u=a.expiresAt;const S=d<u;e("setState",{accLinkInfo:c,accLinkInfoStatus:S?s.FETCHED:s.EXPIRED}),S&&setTimeout((()=>t("startCheckingLinkStatus")));const R=[i.CODE_EXPIRED,i.ERROR,i.REDIRECT_SCREEN].includes(n.mode);let N=Math.floor(u-d);if(!R){const t=setInterval((()=>{N>0&&!R?(e("setState",{expiryTimer:N}),--N):(e("setState",{mode:i.TIMEOUT_ERROR}),clearInterval(t),e("setState",{counterIntervalId:null}))}),1e3);e("setState",{counterIntervalId:t})}return await new Promise((e=>setTimeout(e,500))),S},async getUserInfoAsync({commit:e,rootGetters:t,rootState:n}){e("setState",{isSignProcessing:!0,userDisplayInfoStatus:s.FETCHING});const o=await I.A.account.fetchUserInfo({}),r=R.createFromUserModule(o);return r?(e("setState",{mode:i.ACC_LINK,isSignProcessing:!1,userDisplayInfo:r,userDisplayInfoStatus:s.FETCHED,signInMethods:null===o||void 0===o?void 0:o.sign_in_methods}),!0):(n.otp.referenceId?e("setState",{isSignProcessing:!1,mode:t.signInformation(n).signIn?i.SIGN_IN_OTP:i.SIGN_UP_OTP}):e("setState",{mode:i.SIGN_IN,isSignProcessing:!1}),!1)},async signOutAsync({commit:e,dispatch:t,state:n}){e("setState",{isSignProcessing:!0}),await I.A.logout(),(0,l.sw)();const o={...N(),isSignProcessing:!0,mode:n.mode===i.REDIRECT_SCREEN?i.REDIRECT_SCREEN:i.SIGN_IN,screenType:n.screenType,accLinkInfo:n.accLinkInfo,accLinkInfoStatus:n.accLinkInfoStatus};setTimeout((()=>e("setState",o)),500),setTimeout((()=>{e("setState",{isSignProcessing:!1}),t("openApi/updateErrorMode",null,{root:!0})}),1e3)},async signWithMobileAsync({commit:e,state:t},n){if(t.isSignProcessing)return[a.ALREADY_PROCESSING];e("setState",{isSignProcessing:!0,isSignErrorTipDisplayed:!1});const[,o,r]=t.mode===i.SIGN_IN?await I.A.userModule.oauthTokenPassword(n):await I.A.userModule.signUpMobile({mobile:n.username,password:n.password}),s=Boolean(o&&o.otp_reference_id),c=Boolean(o&&o.access_token);switch(setTimeout((()=>e("setState",{isSignProcessing:!1})),250),!0){case s:return o&&o.otp_reference_id?[a.OTP_REQUIRED,o.otp_reference_id,o.otp_prefix]:[a.FAILED];case c:return[a.SUCCESS];default:switch(t.mode){case i.SIGN_IN:e("setState",{isSignErrorTipDisplayed:!0,errorCode:r&&r.response&&r.response.data&&r.response.data.result_info&&r.response.data.result_info.result_msg||""});break;case i.SIGN_UP:if((()=>{const e=o||r&&r.response&&r.response.data;return e&&e.result_info&&"01103104"===e.result_info.result_code_id})())e("setState",{isSignErrorTipDisplayed:!0});else{const t=d.p.createError("UM_GENERIC",o,r);e("setState",{displayInfo:t})}break}return[a.FAILED]}},async signVerifyOtpAsync({commit:e,state:t},n){if(t.isSignProcessing)return c.ALREADY_PROCESSING;e("setState",{isSignProcessing:!0});const[o]=t.mode===i.SIGN_IN_OTP?await I.A.userModule.oauthTokenOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:parseInt(n.otp,10)}):await I.A.userModule.signUpMobileValidateOtp({otp_prefix:n.otpPrefix,otp_reference_id:n.id,otp:n.otp});return o||setTimeout((()=>e("setState",{isSignProcessing:!1})),250),o?c.SUCCESS:c.FAILED},startRedirectTimer({commit:e}){let t=3;return e("setState",{redirectTimer:t}),new Promise((n=>{setTimeout((()=>{setInterval((()=>{t>=0?(e("setState",{redirectTimer:t}),t--):n(!0)}),1e3)}),1e3)}))},async startCheckingLinkStatus({commit:e,state:t,rootGetters:n}){e("setState",{isPollingStarted:!0}),T=window.setInterval((async()=>{if(t.isPollingStarted&&-1===[i.ERROR,i.PROCESSING,i.KYC_DATA_MISMATCH,i.KYC_NOT_COMPLETED,i.INTENT_CLICKED].indexOf(t.mode)){const o=await I.A.openApi.checkAccountLinkStatus();if(!o||o===u.OQ.SESSION_NOT_FOUND)return clearInterval(T),void e("setState",{isPollingStarted:!1,mode:i.CODE_EXPIRED});const{data:r}=o;if(r&&("ACCEPTED"===r.accountLinkStatus||"DECLINED"===r.accountLinkStatus)){let o=r.callbackUrl;if(o+=o.indexOf("?")>-1?"&":"?",r.callbackParams&&(o+=E.A.stringify(r.callbackParams)),"ACCEPTED"===r.accountLinkStatus)n["openApi/isAutoTopupMandate"]||setTimeout((()=>{e("setState",{mode:i.REDIRECT_SCREEN,redirectUrl:o})}),500);else{const e=n["openApi/paylaterCCStatus"];if(n["openApi/isPPCDOnlyClientMandate"]&&(e===A.b5.INACTIVE||e===A.b5.REVIEWING))return;clearInterval(T),t.isPollingStarted=!1,window.location.href=o}clearInterval(T),t.isPollingStarted=!1}}}),2e3)},stopPolling(){T&&clearInterval(T)},clearTimerIntervalId({commit:e,state:t}){null!==t.counterIntervalId&&(clearInterval(t.counterIntervalId),e("setState",{counterIntervalId:null}))},async getSystemAnnouncementBannerInfo({commit:e},t){let n="";switch(t.screenType){case"SIGN_IN":n="SIGNIN";break;case"SIGN_UP":n="SIGNUP";break}if(n)try{const[t,i]=await I.A.bff.getSystemAnnouncementBannerInfo(n);t&&e("setState",{systemAnnouncementBannerInfo:null===i||void 0===i?void 0:i.payload.systemAnnouncementBannerInfo})}catch(i){}}},p={mode:({mode:e})=>e,screenType:({screenType:e})=>e,isSecondaryBrowser:({isSecondaryBrowser:e})=>e,isPollingStarted:({isPollingStarted:e})=>e,isSignProcessing:({isSignProcessing:e})=>e,isFetchingData:({isFetchingData:e})=>e,isProcessingDisplayed:({mode:e})=>e===i.PROCESSING,isSmartPaymentProcessing:({isSmartPaymentProcessing:e})=>e,accLinkInfo:({accLinkInfo:e})=>e,accLinkInfoStatus:({accLinkInfoStatus:e})=>e,merchantInfo:({accLinkInfo:e})=>e?e.merchant:{},isFetchingErrorQrCodeDisplayed:({accLinkInfoStatus:e,mode:t})=>[s.ERROR,s.EXPIRED].includes(e)||[i.ERROR,i.KYC_DATA_MISMATCH,i.KYC_NOT_COMPLETED,i.CODE_EXPIRED,i.LINKING_FAILED,i.VIRTUAL_ACCOUNT_NOT_VALID_STATE].includes(t),isRedirectScreenDisplayed:({mode:e,accLinkInfoStatus:t})=>[i.REDIRECT_SCREEN].includes(e)&&![s.ERROR,s.EXPIRED].includes(t),codeId:({accLinkInfo:e})=>e&&e.codeId||"",userDisplayInfo:({userDisplayInfo:e})=>e,userDisplayInfoStatus:({userDisplayInfoStatus:e})=>e,displayInfo:({displayInfo:e})=>e,isModalProfileBoxVisible:({isModalProfileBoxVisible:e})=>e,isProfileMenuButtonVisible:({isProfileMenuButtonVisible:e})=>e,isLoadingScreenVisible:({isSignProcessing:e,isSmartPaymentProcessing:t,isAutoMandateProcessing:n,showAsyncLoader:i})=>Boolean(e||t||n||i),isScreenModeDesktop:({screenType:e})=>e===r.DESKTOP,isScreenModeMobile:({screenType:e})=>e===r.MOBILE,isSignErrorTipDisplayed:({isSignErrorTipDisplayed:e})=>e,isSignInUpDisplayed:({mode:e})=>Boolean(e===i.SIGN_IN||e===i.SIGN_UP),isSignOtpDisplayed:({mode:e})=>Boolean(e===i.SIGN_IN_OTP||e===i.SIGN_UP_OTP),isAccountLinkDisplayed:({mode:e})=>Boolean(e===i.ACC_LINK),isTimeoutErrorDisplayed:({mode:e})=>Boolean(e===i.TIMEOUT_ERROR),isLinkingErrorDisplayed:({mode:e})=>Boolean(e===i.LINK_ERROR||e===i.PAYLATERCC_REVIEW_PENDING),isKycErrorDisplayed:({mode:e})=>Boolean(e===i.KYC_ERROR),isAgeErrorDisplayed:({mode:e})=>Boolean(e===i.AGE_ERROR),isSpecificKycErrorDisplayed:({mode:e})=>Boolean(e===i.KYC_SPECIFIED_NOT_COMPLETED),isNonPayrollUser:({mode:e})=>Boolean(e===i.MISSING_VIRTUAL_ACCOUNT),suspendedPayrollUser:({mode:e})=>Boolean(e===i.VIRTUAL_ACCOUNT_NOT_VALID_STATE),isScreenBlur:({displayInfo:e})=>Boolean(e.isVisible),redirectTimer:({redirectTimer:e})=>e,redirectUrl:({redirectUrl:e})=>e||"",expiryTimer:({expiryTimer:e})=>e,systemAnnouncementBannerInfo:({systemAnnouncementBannerInfo:e})=>e,isSoftBankUser:({signInMethods:e})=>e.some((e=>"SOFTBANK_ID"===e.sign_in_method_provider))},m={setState(e,t){Object.assign(e,t)},updateRedirectUrl(e,t){e.redirectUrl=t},updateMode(e,t){e.mode=t},updateExpiryTimer(e,t){e.expiryTimer=t}},D={namespaced:!0,actions:C,getters:p,mutations:m,state:N()}}}]);